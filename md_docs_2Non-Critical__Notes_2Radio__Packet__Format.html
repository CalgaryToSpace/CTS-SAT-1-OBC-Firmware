<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CTS-SAT-1-OBC-Firmware: Radio Packet Format</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CTS-SAT-1-OBC-Firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Radio Packet Format</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md56"></a></p>
<h1><a class="anchor" id="autotoc_md57"></a>
Packet Type Enum</h1>
<p>The first byte of the packet (after the 4-byte CSP header) is the packet type. The packet type is an enum which indicates the type of packet being sent. The packet type is used to determine how to parse the rest of the packet.</p>
<h2><a class="anchor" id="autotoc_md58"></a>
Byte 0: Enum packet type</h2>
<ul>
<li><code>0x01</code> - beacon (basic telemetry, no peripherals)</li>
<li><code>0x02</code> - beacon (peripheral telemetry)</li>
<li><code>0x03</code> - log message</li>
<li><code>0x04</code> - telecommand response</li>
<li><code>0x10</code> - bulk file downlink</li>
</ul>
<h1><a class="anchor" id="autotoc_md59"></a>
Bytes 1-200 of the Packet, for each Packet Type</h1>
<h2><a class="anchor" id="autotoc_md60"></a>
Byte 1-200 of Basic Telemetry Beacon Packets (Packet Type <code>0x01</code>)</h2>
<p>TODO: Fill in the format here. For now, see <a href="https://github.com/CalgaryToSpace/CTS-SAT-1-OBC-Firmware/issues/338">https://github.com/CalgaryToSpace/CTS-SAT-1-OBC-Firmware/issues/338</a>.</p>
<h2><a class="anchor" id="autotoc_md61"></a>
Byte 1-200 of Peripheral Telemetry Beacon Packets (Packet Type <code>0x02</code>)</h2>
<p>TODO: Fill in the format here. For now, see <a href="https://github.com/CalgaryToSpace/CTS-SAT-1-OBC-Firmware/issues/338">https://github.com/CalgaryToSpace/CTS-SAT-1-OBC-Firmware/issues/338</a>.</p>
<h2><a class="anchor" id="autotoc_md62"></a>
Bytes 1-200 of Log Message Packets (Packet Type <code>0x03</code>)</h2>
<p>This packet type does not have sequence numbers. All log messages fit within (or are truncated to fit within) a single packet.</p>
<p>Plain text content, same as UART messages.</p>
<h2><a class="anchor" id="autotoc_md63"></a>
Bytes 1-200 of Telecommand Response Packets (Packet Type <code>0x04</code>)</h2>
<p>This packet type has sequence numbers.</p>
<ul>
<li>Bytes 1,2,3,4,5,6,7,8: uint64_t of tssent (unique ID of the associated uplinked telecommand)</li>
<li>Byte 9: uint8_t of response code (0 for success)</li>
<li>Byte 10,11: uint16_t of duration in ms</li>
<li>Byte 12: sequence number of telecommand response (starting from 1)</li>
<li>Byte 13: total number of telecommand response packets (e.g., 1 if &lt;183 bytes)</li>
<li>Bytes 14-200: Plain text content of the <code>response_output_buf</code>, null terminated</li>
</ul>
<h2><a class="anchor" id="autotoc_md64"></a>
Bytes 1-200 of Bulk File Downlink Packets (Packet Type <code>0x10</code>)</h2>
<p>This packet type has sequence numbers.</p>
<ul>
<li>Byte 1: sequence number of file downlink packet (starting from 1)</li>
<li>Byte 2: total number of file downlink packets (e.g., 1 if &lt;183 bytes)</li>
<li>Bytes 3,4,5,6: uint32_t of byte offset within file</li>
<li>Bytes 7-200: Content of file</li>
</ul>
<h1><a class="anchor" id="autotoc_md65"></a>
Other Details</h1>
<h2><a class="anchor" id="autotoc_md66"></a>
Endianness</h2>
<p>All multi-byte integers in these packets are in little-endian format.</p>
<p>For example, a uint16_t value of 1013 (0x03F5) would be sent as [0xF5, 0x03].</p>
<h2><a class="anchor" id="autotoc_md67"></a>
Packet Length</h2>
<p>The packet length is encoded by the AX100 in the ASM+GOLAY encoding scheme.</p>
<p>It is not managed nor encoded in the packets at the level handled by this firmware on the OBC. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
